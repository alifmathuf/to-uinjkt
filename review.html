<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Review jawaban tryout PPG - Lihat hasil dan analisis jawaban ujian Anda">
  <title>Review Jawaban - Tryout PPG</title>

  <!-- Preconnect untuk performa -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="preconnect" href="https://www.gstatic.com">

  <!-- CSS -->
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/review.css">

  <!-- Scripts (defer untuk performa) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" defer></script>
  <script src="https://unpkg.com/lucide@latest" defer></script>

  <!-- ================= FIREBASE ================= -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <!-- ============================================ -->
</head>

<body>
  <div class="layout">
    <main class="review-container">
      
      <!-- Loading State -->
      <div id="loadingState" class="loading-state" aria-live="polite">
        <div class="spinner"></div>
        <p>Memuat data review...</p>
      </div>

      <!-- Error State (hidden by default) -->
      <div id="errorState" class="error-state" hidden>
        <i data-lucide="alert-circle"></i>
        <p>Gagal memuat data. Silakan refresh halaman.</p>
        <button onclick="location.reload()" class="btn-primary">Coba Lagi</button>
      </div>

      <!-- Content -->
      <article class="card review-card" id="reviewContent" hidden>
        <header class="review-header">
          <h1>Review Jawaban Ujian</h1>
          <p class="review-subtitle">Lihat analisis jawaban dan status kebenaran</p>
        </header>

        <div class="table-wrapper" role="region" aria-label="Tabel review jawaban" tabindex="0">
          <table class="review-table">
            <thead>
              <tr>
                <th scope="col">No</th>
                <th scope="col">Soal</th>
                <th scope="col">Jawaban Anda</th>
                <th scope="col">Status</th>
              </tr>
            </thead>
            <tbody id="reviewBody">
              <!-- Data diisi oleh JavaScript -->
            </tbody>
          </table>
        </div>

        <footer class="review-footer">
          <a href="dashboard.html" class="btn-secondary">
            <i data-lucide="arrow-left"></i>
            <span>Dashboard</span>
          </a>
          <a href="result.html" class="btn-primary">
            <span>Lihat Hasil</span>
            <i data-lucide="arrow-right"></i>
          </a>
        </footer>
      </article>

    </main>
  </div>

  <!-- ================= JS APP ================= -->
  <script src="js/auth.js"></script>
  <script src="js/layout.js"></script>
  <script src="js/review.js"></script>

  <script>
    // Protect route
    if (typeof Auth !== 'undefined') {
      Auth.protect();
    }

    // Initialize icons setelah DOM ready
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }
    });
  </script>
</body>
</html>
